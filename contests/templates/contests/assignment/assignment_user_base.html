{% extends 'base_wide.html' %}
{% load views contests accounts static %}

{% block title %}
Мои задания
{% endblock title %}

{% block breadcrumbs %}
{% breadcrumb "Главная" 'contests:index' %}
{% breadcrumb "Мои задания" %}
{% endblock breadcrumbs %}

{% block content %}
{% include 'contests/news_block.html' %}
<br>

<legend>
    Мои задания
    <span class="pull-right">
        <a href="{% url 'contests:course-list' %}" class="text-decoration-none" data-toggle="tooltip" data-placement="left" title="Все курсы"><i class="fa fa-book fa-fw"></i></a>
    </span>
</legend>
{% render_assignment_user_table assignments credits %}
{% render_assignment_progress assignments "Прогресс" %}

{% block javascript %}
</script>

    <script>
    var infinite = new Waypoint.Infinite({
        element: $('.notification-list')[0],
        items: '.notification-list-item',
        more: '.notification-list-more'
    });
</script>
<script type="text/javascript" src="{% static 'js/notifications.js' %}"></script>
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        const watcher = new ReadWatcher("{% url 'accounts:mark-notifications-as-read' %}");
        if(parseInt('{% unread_notifications_count request.user %}') > 0) {
            window.addEventListener('scroll', watcher, false);
            document.getElementById('notifications').addEventListener('mouseover', watcher, false);
            setTimeout(watcher.markNotificationsAsRead.bind(watcher), 1000);
        }
    });
    </script>
{% endblock javascript %}
{% endblock content %}
