{% extends 'contests/course/course_detail.html' %}
{% load comments contests markdown static %}

{% block content %}
<legend>{{ course }} <small class="text-muted">{{ course.get_level_display }}</small></legend>
<ul class="nav nav-tabs mb-3" role="tablist">
    <li class="nav-item">
        <a aria-controls="description" aria-selected="false" class="nav-link" data-toggle="tab" href="#description"
           id="description-tab" role="tab">Описание</a>
    </li>
    <li class="nav-item">
        {% render_discussion_tab course %}
    </li>
</ul>
<div class="tab-content">
    <div aria-labelledby="description-tab" class="tab-pane fade " id="description" role="tabpanel">
        <p>{{ course.description|markdown|safe }}</p>
        {% include 'list.html' with lst=course.contest_set.all title="Разделы:" %}
    </div>
    <div aria-labelledby="discussion-tab" class="tab-pane fade show active" id="discussion" role="tabpanel">
        {% render_comments course comments %}
    </div>
</div>
{% endblock content %}

{% block javascript %}
<script src="{% static 'MathJax/es5/tex-chtml.js' %}" type="text/javascript"></script>
<script src="{% static 'waypoints/lib/jquery.waypoints.min.js' %}" type="text/javascript"></script>
<script src="{% static 'waypoints/lib/shortcuts/infinite.min.js' %}" type="text/javascript"></script>
<script>
    var infinite = new Waypoint.Infinite({
        element: $('.comment-list')[0],
        items: '.comment-list-item',
        more: '.comment-list-more'
    });
</script>
{% endblock javascript %}
